title: 减小图片内存的方法
date: 2016-01-19 11:59:56
tags:
- Android
- Bitmap

---

**大图小用用采样，小图大用用矩阵**

### 采样

	BitmapFactory.Options options = new Options();
	options.inSampleSize = 2;
	Bitmap bitmap = BitmapFactory.decodeResource(getResources(),resId,options);
	
### 使用矩阵

方式一:

	Matrix matrix = new Matrix();
	matrix.preScale(2,2,0f,0f);
	//如果使用直接替换矩阵的话，在Nexus6 5.1.1上必须关闭硬件加速
	canvas.concat(matrix);
	canvas.drawBitmap(bitmap,0,0,paint);
	
方式二:

	Matrix matrix = new Matrix();
	matrix.preScale(2,2,0,0);
	canvas.drawBitmap(bitmap,matrix,paint);

这样绘制出来的图就是放大以后的效果了，不过占用的内存却依然是采样出来的大小。

	Matrix matrix = new Matrix();
	matrix.postScale(2,2,0,0);
	imageView.setImageMatrix(matrix);
	imageView.setScaleType(ScaleType.MATRIX);
	imageView.setImageBitmap(bitmap);
	
### 选择Bitmap的像素格式

- ALPHA_8:只有一个alpha通道

- ARGB_4444:不建议使用

- ARGB_8888:ARGB四个通道，每个通道8Bit，是最常用的

- RGB_565:每个像素占2Byte,当资源为jpg格式的情况下，用这个格式比较理想



